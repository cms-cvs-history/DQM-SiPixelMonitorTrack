process SiPixelMonitorTrackProcess = {
  # initialize MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  # global tracker or detector geometry
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
  # include "Geometry/TrackerRecoData/data/trackerRecoGeometryXML.cfi"
  # include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
  # 
  # tracker geometry
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
  
  # tracker numbering
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  # strip parameter estimator service for SiStripRecHitConverter
  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"

  untracked PSet maxEvents = { 
    untracked int32 input = 100 
  }
  # es_source = PoolDBESSource { 
  #   VPSet toGet = {
  #     { string record = "SiStripPedestalsRcd" string tag = "SiStripPedestals_v1" }, 
  #     { string record = "SiStripNoisesRcd" string tag = "SiStripNoises_v1" } 
  #   }
  #   bool loadAll = true
  #   string connect = "sqlite_file:/data/mtcc/pedestals/SiStripPedNoises.db"
  #   untracked string catalog = "file:/data/mtcc/pedestals/SiStripPedNoisesCatalog.xml" 
  #   string timetype = "runnumber" 
  #   untracked uint32 authenticationMethod = 1
  #   untracked uint32 messagelevel = 0
  # }
  source = PoolSource { 
    untracked vstring fileNames = { 
      '/store/RelVal/2007/7/11/RelVal-RelVal160pre410MuonsPt10-1184176074/0000/801777C7-DF2F-DC11-83DD-000423D98760.root' 
    }
  }
  # include SiPixeClusterizer
  include "RecoLocalTracker/SiPixelClusterizer/data/SiPixelClusterizer.cfi"
  # 
  # include SiPixelRecHitConverter
  include "RecoLocalTracker/SiPixelRecHits/data/SiPixelRecHits.cfi"

  # # include SiStripClusterizer
  # include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer_SimData.cfi"
  # replace SiStripNoiseServiceParameters.UseCalibDataFromDB = false
  # 
  # include SiStripRecHitConverter
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitConverter.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
  
  # GlobalMixedSeedGenerator
  include "RecoTracker/TkSeedGenerator/data/GlobalMixedSeeds.cff"
  
  # KFTrackCandidateMaker
  include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cff"
  # 
  # # CTF analytical track fit
  # include "RecoTracker/TrackProducer/data/CTFFinalFitAnalytical.cff"
  # 
  # CTF track fit with material
  include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"

  # MonitorTrackGlobal
  include "DQM/TrackerMonitorTrack/data/MonitorTrackGlobal.cfi"
  replace MonitorTrackGlobal.TrackProducer = "ctfWithMaterialTracks"

  # SiPixelMonitorTrackResiduals
  include "DQM/SiPixelMonitorTrack/data/SiPixelMonitorTrackResiduals.cfi"

  # validation
  include "Validation/RecoTrack/data/SiPixelTrackingRecHitsValid.cfi"

  # print out what data is contained in the event where the module is in the path
  module EventContentAnalyzer = EventContentAnalyzer {}

  # DQM services
  service = DaqMonitorROOTBackEnd {}

  module out = PoolOutputModule { 
    untracked string fileName = "/afs/cern.ch/user/s/schuang/scratch0/sipixeltrackresiduals.root"
  }
  # schedules
  # 
  sequence localreco = {
    siPixelClusters,
    # siStripClusters,
    siPixelRecHits, 
    siStripMatchedRecHits
  } 
  sequence ckf = {
    globalMixedSeeds,
    ckfTrackCandidates,
    # ctfAnalyticalTracks,
    ctfWithMaterialTracks
  }
  sequence monitor = {
    MonitorTrackGlobal,
    SiPixelMonitorTrackResiduals
  }
  path p = {
    localreco, 
    ckf,
    # EventContentAnalyzer, 
    # PixelTrackingRecHitsValid, 
    monitor
  }
  # endpath e = { out }
}

