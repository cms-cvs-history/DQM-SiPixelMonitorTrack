process SiPixelHitToTrackMon = {

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  # strip parameter estimator service for SiStripRecHitConverter
  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"

  untracked PSet maxEvents = { untracked int32 input = -1 }
  
  source = PoolSource { 
    untracked vstring fileNames = { "file:reco_ckfTrackCandidates.root" }
  }
  # include SiPixeClusterizer
  include "RecoLocalTracker/SiPixelClusterizer/data/SiPixelClusterizer.cfi"
  # 
  # include SiPixelRecHitConverter
  include "RecoLocalTracker/SiPixelRecHits/data/SiPixelRecHits.cfi"

  # include SiStripClusterizer
  include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer_SimData.cfi"
  # 
  # include SiStripRecHitConverter
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitConverter.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
  
  # GlobalMixedSeedGenerator
  include "RecoTracker/TkSeedGenerator/data/GlobalMixedSeeds.cff"
  
  # KFTrackCandidateMaker
  include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cff"
  # 
  # # CTF analytical track fit
  # include "RecoTracker/TrackProducer/data/CTFFinalFitAnalytical.cff"
  # 
  # CTF track fit with material
  include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"

  # MonitorTrackGlobal
  include "DQM/TrackerMonitorTrack/data/MonitorTrackGlobal.cfi"
  replace MonitorTrackGlobal.TrackProducer = "ctfWithMaterialTracks"

  # SiPixelMonitorTrackResiduals
  include "DQM/SiPixelMonitorTrack/data/SiPixelMonitorTrackResiduals.cfi"

  # # Validation
  # include "Validation/RecoTrack/data/SiPixelTrackingRecHitsValid.cfi"

  # # print out what data is contained in the event where the module is in the path
  # module EventContentAnalyzer = EventContentAnalyzer {}

  # DQM services
  service = DaqMonitorROOTBackEnd {}

  module out = PoolOutputModule { 
    untracked string fileName = "/afs/cern.ch/user/s/schuang/scratch0/pixelhitotrackmon.root"
  }
  # schedules
  # 
  sequence localreco = {
    siPixelClusters,
    siStripClusters,
    siPixelRecHits, 
    siStripMatchedRecHits
  } 
  sequence ckf = {
    globalMixedSeeds,
    ckfTrackCandidates,
    # ctfAnalyticalTracks,
    ctfWithMaterialTracks
  }
  sequence monitor = {
    MonitorTrackGlobal,
    SiPixelMonitorTrackResiduals
  }
  path p = {
    localreco, 
    ckf,
    # EventContentAnalyzer, 
    # PixelTrackingRecHitsValid, 
    monitor
  }
  # endpath e = { out }
}

